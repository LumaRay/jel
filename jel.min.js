function jel(){var elParent=this===window?document.body:this;return elParent.jel.apply(elParent,arguments)}jel.settings={},jel.settings.allowScripts=!0,jel.settings.mapKeywords={innerHTML:"innerHTML",html:"html",children:"children",chi:"chi",properties:"properties",prop:"prop",jel:"jel"},jel._templates={},jel.SetTemplate=function(strTemplateName,jelTemplate){return"string"!=typeof strTemplateName||"function"!=typeof jelTemplate&&"object"!=typeof jelTemplate&&"string"!=typeof jelTemplate?void 0:(this._templates[strTemplateName]=jelTemplate,this)},jel.GetTemplate=function(strTemplateName){return this._templates[strTemplateName]},HTMLElement.prototype.jel=function(){function jelSetStyle(el,oStyle){if(Array.isArray(oStyle))for(var o in oStyle)jelSetStyle(el,oStyle[o]);else if("function"==typeof oStyle)jelSetStyle(el,oStyle.call(el,el,el.style));else for(var o in oStyle){var newStyleProp;newStyleProp="function"==typeof oStyle[o]?oStyle[o].call(el,el,el.style[o]):oStyle[o],("string"!=typeof el.style[o]||-1==el.style[o].search("!important")||"string"==typeof newStyleProp&&-1!=newStyleProp.search("!important"))&&(el.style[o]=newStyleProp)}}function jelSetClass(el,oClass){var strClass=el.class;if(null===strClass&&(strClass=""),Array.isArray(oClass))for(o in oClass)jelSetClass(el,oClass[o]);else strClass="function"==typeof oClass?strClass+" "+oClass.call(el,el,strClass.trim()):strClass+" "+oClass;el.class=strClass.trim()}function jelAddHTML(el,strHTML){if(jel.settings.allowScripts||-1==strHTML.search("<script"))return el.appendChild(document.createRange().createContextualFragment(strHTML))}function jelAddArray(el,arr,appliedTemplatesAttr){for(var rel in arr)void 0!==arr[rel].tagName?el.appendChild(arr[rel]):"object"==typeof arr[rel]&&el.jel(arr[rel],{_appliedTemplates:appliedTemplatesAttr})}function jelAddPropertyLink(strTarget,strLocal){var el=this._ownerElement,arTargetProp=strTarget.split("."),arLocalProp=strLocal.split("."),iterTarget=el.jelEx._namedParent;"root"===arTargetProp[0]&&(iterTarget=el.jelEx._componentRoot);for(var tp=1;tp<arTargetProp.length-1;tp++)void 0===iterTarget[arTargetProp[tp]]&&(iterTarget[arTargetProp[tp]]={}),iterTarget=iterTarget[arTargetProp[tp]];for(var iterLocal=el,lp=0;lp<arLocalProp.length-1;lp++){if(void 0===iterLocal[arLocalProp[lp]])throw"Invalid local property";iterLocal=iterLocal[arLocalProp[lp]]}!function(arTargetProp,iterTarget,arLocalProp,iterLocal){Object.defineProperty(iterTarget,arTargetProp[arTargetProp.length-1],{get:function(){return iterLocal[arLocalProp[arLocalProp.length-1]]},set:function(newValue){iterLocal[arLocalProp[arLocalProp.length-1]]=newValue}})}(arTargetProp,iterTarget,arLocalProp,iterLocal)}function jelAddPropertyOrder(strTarget,oLocal){if("object"==typeof oLocal&&Array.isArray(oLocal))for(var l in oLocal)jelAddPropertyOrder.call(this,strTarget,oLocal[l]);else{var el=this._ownerElement,arTargetProp=strTarget.split("."),arLocalProp=oLocal.split("."),iterTarget=el.jelEx._namedParent;"root"===arTargetProp[0]&&(iterTarget=el.jelEx._componentRoot);for(var tp=1;tp<arTargetProp.length-1;tp++)void 0===iterTarget[arTargetProp[tp]]&&(iterTarget[arTargetProp[tp]]={}),iterTarget=iterTarget[arTargetProp[tp]];for(var iterLocal=el,lp=0;lp<arLocalProp.length-1;lp++){if(void 0===iterLocal[arLocalProp[lp]])throw"Invalid local property";iterLocal=iterLocal[arLocalProp[lp]]}!function(arTargetProp,iterTarget,arLocalProp,iterLocal){void 0===iterTarget[arTargetProp[arTargetProp.length-1]]&&(iterTarget[arTargetProp[arTargetProp.length-1]]=function(newValue){for(var p in iterTarget[arTargetProp[arTargetProp.length-1]]._orders)iterTarget[arTargetProp[arTargetProp.length-1]]._orders[p].localPropParent[iterTarget[arTargetProp[arTargetProp.length-1]]._orders[p].localPropName]=newValue;return iterTarget},iterTarget[arTargetProp[arTargetProp.length-1]]._orders=[]),iterTarget[arTargetProp[arTargetProp.length-1]]._orders.push({localPropParent:iterLocal,localPropName:arLocalProp[arLocalProp.length-1]})}(arTargetProp,iterTarget,arLocalProp,iterLocal)}}function jelSetAttributes(el,attributes,appliedTemplatesAttr){for(var a in attributes)if("_appliedTemplates"!=a)switch(typeof attributes[a]){case"string":switch(a){case jel.settings.mapKeywords.innerHTML:case jel.settings.mapKeywords.html:jelAddHTML(el,attributes[a]);break;case"style":case"class":var tmpAttr=el.getAttribute(a);null===tmpAttr&&(tmpAttr=""),el.setAttribute(a,(tmpAttr+" "+attributes[a]).trim());break;default:el.setAttribute(a,attributes[a])}break;case"object":switch(a){case"style":jelSetStyle(el,attributes[a]);break;case"class":jelSetClass(el,attributes[a]);break;case jel.settings.mapKeywords.children:case jel.settings.mapKeywords.chi:if(Array.isArray(attributes[a]))for(var c in attributes[a])switch(typeof attributes[a][c]){case"object":el.jel(attributes[a][c],{_appliedTemplates:appliedTemplatesAttr});break;case"string":jelAddHTML(el,attributes[a][c]);break;case"function":attributes[a][c].call(el,el)}break;case jel.settings.mapKeywords.properties:case jel.settings.mapKeywords.prop:for(var p in attributes[a]){for(var arLocalProp=p.split("."),iterLocal=el,lp=0;lp<arLocalProp.length-1;lp++)void 0===iterLocal[arLocalProp[lp]]&&(iterLocal[arLocalProp[lp]]={}),iterLocal=iterLocal[arLocalProp[lp]];iterLocal[arLocalProp[arLocalProp.length-1]]=attributes[a][p]}break;case jel.settings.mapKeywords.jel:for(var c in attributes[a])switch(c){case"name":el.jelEx._namedParent!==el&&(el.jelEx._namedParent[attributes[a][c]]=el,el.jelEx._namedParentForChildren=el);break;case"root":el.jelEx._componentRoot=el;break;case"links":if("object"!=typeof attributes[a][c])break;for(var p in attributes[a][c])if("object"==typeof attributes[a][c][p])for(var pp in attributes[a][c][p])el.jelEx.AddPropertyLink(pp,attributes[a][c][p][pp]);else el.jelEx.AddPropertyLink(p,attributes[a][c][p]);break;case"orders":if("object"!=typeof attributes[a][c])break;for(var p in attributes[a][c])if("object"==typeof attributes[a][c][p])for(var pp in attributes[a][c][p])el.jelEx.AddPropertyOrder(pp,attributes[a][c][p][pp]);else el.jelEx.AddPropertyOrder(p,attributes[a][c][p])}}break;case"function":el.setAttribute(a,attributes[a].call(el,el,el.getAttribute(a)));break;default:el.setAttribute(a,attributes[a])}}function jelSoftClone(oSrc){var oTrg={};for(var o in oSrc)oTrg[o]=oSrc[o];return oTrg}function jelSoftCloneArray(aSrc){for(var aDest=new Array(aSrc.length),i=0;i<aDest.length;i++)aDest[i]=aSrc[i];return aDest}if(0!==arguments.length){var appliedTemplatesAttr="object"==typeof arguments[arguments.length-1]&&void 0!==arguments[arguments.length-1]._appliedTemplates?jelSoftClone(arguments[arguments.length-1]._appliedTemplates):void 0;if("object"==typeof arguments[0]&&Array.isArray(arguments[0])){var arrEls=[];for(var o in arguments[0]){var newArgs=jelSoftCloneArray(arguments);newArgs[0]=arguments[0][o];var newEl=this.jel.apply(this,newArgs);"undefined"!=newEl&&arrEls.push(newEl)}return arrEls}if("object"==typeof arguments[0]){var tagName=void 0,attrs=void 0;for(var key in arguments[0]){tagName=key,attrs=arguments[0][key];break}return Array.prototype.unshift.call(arguments,tagName),arguments[1]=attrs,this.jel.apply(this,arguments)}if("string"!=typeof arguments[0])throw"Format error";if("function"==typeof jel._templates[arguments[0]])return jel._templates[arguments[0]].call(this,this,arguments[0]);if(jel.settings.allowScripts||"script"!=arguments[0].trim()){var el={};if("object"!=typeof jel._templates[arguments[0]]||void 0!==appliedTemplatesAttr&&!0===appliedTemplatesAttr[arguments[0]]?el=document.createElement(arguments[0]):(void 0===appliedTemplatesAttr&&(appliedTemplatesAttr={}),appliedTemplatesAttr[arguments[0]]=!0,el=this.jel(jel._templates[arguments[0]],{_appliedTemplates:appliedTemplatesAttr})),el.jelEx={},el.jelEx._ownerElement=el,el.jelEx._namedParentForChildren=el,el.jelEx._namedParent=el,el.jelEx._componentRoot=el,el.jelEx._topComponentRoot=el,el.jelEx.AddPropertyLink=jelAddPropertyLink,el.jelEx.AddPropertyOrder=jelAddPropertyOrder,void 0!==this.jelEx&&(el.jelEx._namedParentForChildren=this.jelEx._namedParentForChildren,el.jelEx._namedParent=this.jelEx._namedParentForChildren,el.jelEx._componentRoot=this.jelEx._componentRoot),void 0===el)throw"Unknown error";for(var i=1;i<arguments.length;i++)switch(typeof arguments[i]){case"string":jelAddHTML(el,arguments[i]);break;case"object":Array.isArray(arguments[i])?jelAddArray(el,arguments[i],appliedTemplatesAttr):jelSetAttributes(el,arguments[i],appliedTemplatesAttr);break;case"function":if(!1===arguments[i].call(el,el))return}return this.appendChild(el),el}}};