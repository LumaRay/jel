<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="./jel.js"></script>
</head>
<body>
    <script>
        document.addEventListener("DOMContentLoaded", function(event) { 

            jel.SetTemplate("label", {label: {style: "color: red;"}});

            // document.head.jel("meta");
            // document.getElementsByTagName("html")[0].jel("head2");
            // document.head.parentElement.jel("body2");
            // jel("div");
            // jel("div", {
            //     "id": "testid",
            //     "class": "testcl",
            //     "name": "testname"
            // });
            // jel("div", {id: "testid", class: "testcl", name: "testname", style: "width: 50px; height: 50px; background: green;"});
            // jel("div", {id: "testid", class: "testcl", name: "testname", style: {width: "50px", height: "50px", background: "green"}});
            // jel({div: {id: "testid", class: "testcl", name: "testname", style: {width: "50px", height: "50px", background: "green"}}});
            // jel({div: {id: "testid", class: "testcl", name: "testname", style: {width: "50px", height: "50px", background: "green"}}},[
            //     {div: {id: "testid2", class: "testcl", name: "testname2", style: {width: "30px", height: "30px", background: "blue"}}}
            // ]);
            // jel("div", {id: "testid", class: "testcl", name: "testname", style: "width: 50px; height: 50px; background: green;"}, [
            //     {div: {id: "testid2", class: "testcl", name: "testname2", style: {width: "30px", height: "30px", background: "blue"}}}
            // ]);
            // jel("div", function(){
            //     this.jel("h1");
            //     this.jel("h2");
            //     this.jel("h3");
            // });
            // jel("div", el => {
            //     el.jel("h1");
            //     el.jel("h2");
            //     el.jel("h3");
            // });
            // jel("div", [
            //     jel("h1"),
            //     jel("h2"),
            //     jel("h3")
            // ]);
            // jel("div")
            //     .jel("h1");
            // jel("div", {
            //     id: "testid",
            //     class: "testcl",
            //     name: "testname"
            // }, [
            //     jel("h1"),
            //     jel("h2"),
            //     jel("h3")
            // ]);
            // jel({div: {
            //     id: "testid",
            //     class: "testcl",
            //     name: "testname"
            // }}, [
            //     jel("h1"),
            //     jel("h2"),
            //     jel("h3")
            // ]);
            window.elTest = jel({div: 
                {
                    id: "testid",
                    class: "testcl",
                    name: "testname",
                    children: [
                        {div: {id: "testid2", class: "testcl", name: "testname2", style: "width: 50px; height: 50px; background: green;"}},
                        "Bla <b>bla</b>",
                        {div: {
                            id: "testid3", class: "testcl", name: "testname3", 
                            style: {width: "30px", height: "30px", background: "blue"}, 
                            jel:{name: "tn2", links: {
                                "root.testWidth": "style.width",
                                "root.testEventListener": "addEventListener",
                                "root.testOnClick": "onclick",
                                "master.testBackgroundColor": "style.backgroundColor"
                            }}
                        }},
                        "Yeee ",
                        "Cool",
                        {div:{children:[{div:{children:[{div:{children:[{div:{jel:{name: "lowestNode"}}}, function(el) {window.ttt = el;}]}}]}}]}}
                    ],
                    innerHTML: "test<b>!</b>",
                    jel: {
                        name: "topName",
                        root: ""
                    }
                }}, 
                "Test <i>1111</i>", 
                [
                    jel("h1"),
                    jel("h2", "Test <u>H2</u>"),
                    jel("h3")
                ],
                "Test 2222", 
                function(el) {
                    el.jel("h4");
                    el.jel("h5");
                    el.jel("h6");
                }
            );
            // elTest.testEventListener("click",function(e){console.log(e.target);});
            elTest.testOnClick = function(){alert(1);};

            // jel("div",{children: [
            //     {dev:{children: [
            //         {dev:{}},
            //         el => {window.ttt = el;}
            //     ]}},
            //     "test!"
            // ]});

            jel({form: {action: "", method: "post", children: [
                {label: {for: "FullName", children: ["Full Name"]}}, {br:{}},
                {input: {type: "text", name: "FullName", id: "FullName"}},
                {br:{}},
                {label: {for: "Passport", children: ["Your Local ID"]}}, {br:{}},
                {input: {type: "text", name: "Passport", id: "Passport"}},
                {br:{}},
                {label: {for: "Scan", children: ["Scan of application form"]}}, {br:{}},
                {input: {type: "file", name: "Scan", id: "Scan"}},
                {hr:{}},
                {label: {for: "Comments", children: ["Additional comments"]}}, {br:{}},
                {textarea: {rows: 10, cols: 45, name: "Comments", id: "Comments"}},
                {br:{}},
                {label: {for: "AdditionalFiles", children: ["Additional files"]}}, {br:{}},
                {input: {type: "file", name: "AdditionalFiles", id: "AdditionalFiles"}},
                {br:{}},
                {input: {type: "submit", value: "Save"}}
            ]}});





            function addFormField(el, arrInputData) {
                el.jel({label: {for: arrInputData.inputName, children: [arrInputData.inputTitle]}});
                el.jel({br:{}});
                el.jel(new function() {
                    this[arrInputData.inputTag] = {
                        type: arrInputData.inputType, 
                        name: arrInputData.inputName, 
                        id: arrInputData.inputName};
                    if (arrInputData.inputType != "")
                        this[arrInputData.inputTag]["type"] = arrInputData.inputType;
                    for (var a in arrInputData.additionalAttributes)
                        this[arrInputData.inputTag][a] = arrInputData.additionalAttributes[a];
                });
            }



            function addForm(el, arrFieldsData, strSubmitTitle) {
                el.jel({form: {action: "", method: "post"}}, function() {
                    for (var d in arrFieldsData) {
                        if (arrFieldsData[d].inputTag === "hr") {
                            this.jel("hr");
                            continue;
                        }
                        addFormField(this, arrFieldsData[d]);
                        // if (d !== Object.keys(arrFieldsData)[Object.keys(arrFieldsData).length-1])
                            this.jel("br");
                    }
                    this.jel([{br:{}}, {br:{}}]);
                    this.jel({input: {type: "submit", value: strSubmitTitle}});
                });
            }



            var formData = [
                {inputTag: "input", inputType: "text", inputName: "FullName", inputTitle: "Full Name", additionalAttributes: {}},
                {inputTag: "input", inputType: "text", inputName: "Passport", inputTitle: "Your Local ID", additionalAttributes: {}},
                {inputTag: "input", inputType: "file", inputName: "Scan", inputTitle: "Scan of application form", additionalAttributes: {}},
                {inputTag: "hr"},
                {inputTag: "textarea", inputType: "", inputName: "Comments", inputTitle: "Additional comments", additionalAttributes: {rows: 10, cols: 45}},
                {inputTag: "input", inputType: "file", inputName: "AdditionalFiles", inputTitle: "Additional files", additionalAttributes: {}},
            ];

            addForm(document.body, formData, "Save");

        });
    </script>
</body>
</html>